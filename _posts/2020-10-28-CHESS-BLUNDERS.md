---
layout: post
title: "How many mistakes do Grandmaster chess players make?"
subtitle: "Comparing chess player errors versus their rating"
date: 2020-10-28 16:53:00
author: "Krystian Wojcicki"
header-img: "img/posts/jekyll-bg.jpg"
comments: true
tags: [Analysis]
---

> Code for generating the graphs can be found at [https://github.com/kwojcicki/chess-stats](https://github.com/kwojcicki/chess-stats)

<style>
figcaption {
    text-align: center;
}

details {border: 1px solid #E1E1E1; border-radius: 5px; box-shadow: 0 1px 4px rgba(0, 0, 0, .4); color: #363636; margin: 0 0 .4em; padding: 1%;}

details[open] {background: #E1E1E1;}

summary {background: -webkit-linear-gradient(top, #FAFAFA 50%, #E1E1E1 50%); border-radius: 5px; cursor: pointer; font-size: .8em; font-weight: bold; margin: -1%; padding: 8px 0; position: relative; width: 102%;}

summary:hover, details[open] summary {background: #E1E1E1;}

summary::-webkit-details-marker {display: none}

summary:before{border-radius: 5px; content: "+"; color: #363636; display: block; float: left; font-size: 1.5em; font-weight: bold; margin: -2px 10px 0 10px; padding: 0; text-align: center; width: 20px;}

details[open] summary:before {content: "-"; margin-top: -4px;}

</style>

# ACPL vs Rating

Chess, for practical purposes, is solved. Using online platforms players can compare their moves against optimal moves generated by chess engines/AI's. Centipawn Loss (CPL) is a measure of how suboptimal one's move is. A centipawn is equal to `1/100th` of a pawn, meaning a CPL of `100` indicates the player made a move that lost the equivalent to `1` pawn. A CPL of `100` does not necessarily mean you lost a pawn unnecessarily; CPL also takes into account positions and potential mates. [Average Centipawn Loss](https://lichess.org/faq#acpl) (ACPL) is the average CPL across a given game. ACPL is a positive number between 0 and infinity. An ACPL near 20 is excellent indicting near perfect play, whereas an ACPL above 300 either means you're a 3 year old toddler or purposefully losing the game. Being able to calculate ACPL raises the question, is ACPL correlated to one's [rating](https://en.wikipedia.org/wiki/Elo_rating_system)?

<details><summary>In-depth CPL explanation</summary>

<div markdown="1">

Let's examine the following board

![Even chess game](/img/posts/even_game.PNG)

Both sides have similar pieces and similar positions. [Stockfish](https://stockfishchess.org/) gives this board a score of `-0.69` (i.e. black is up `69/100th` of a pawn or `69` Centipawn's).

The optimal move is to move your bishop to `b4`.

![Average Centipawn Loss vs Rating](/img/posts/optimal_move.PNG)

That board is evaluated at `-0.71`.

If instead we played the bishop to `c3`, Stockfish will reevaluate the board to `-0.89`.

![Average Centipawn Loss vs Rating](/img/posts/bad_move.PNG)

Since the optimal move resulted in a board evaluation of `-0.71` and our move achieved an evaluation of `-0.89`, our move receives a CPL of `-71 - -89 = 18`.

</div>
</details>

<figure class="image">
  <img src="/img/posts/acpl_vs_rating.PNG" alt="Average Centipawn Loss vs Rating">
  <figcaption><b>Fig 1</b>: Rating vs ACPL per game <sup id="a1"><a href="#f1">[1]</a></sup><sup id="a15"><a href="#f15">[1.5]</a></sup></figcaption>
</figure>

The graph shows a negative correlation between rating and ACPL (ACPL decreases as rating increases) which follows common sense; as a player gets better they tend to perform moves that are closer to the optimal.

ACPL, as most performance indicators, require context. A player can achieve an ACPL of 20 in a variety of ways. They can immediately blunder their queen and attempt to stretch out the inevitable<sup id="a2">[2](#f2)</sup> or they can play an excellent game.

Instead of looking at rating vs ACPL, we'll look at rating vs move types. Online chess platforms tend to classify moves into several broad categories: best move, good move, inaccuracy (CPL between `50-100`), mistake (CPL between `100-300`) and blunder (CPL `>200`).

<figure class="image">
  <img src="/img/posts/errors_vs_rating.PNG" alt="Errors vs Rating">
  <figcaption><b>Fig 2</b>: Rating vs Errors per game <sup id="a1"><a href="#f1">[1]</a></sup></figcaption>
</figure>

As one would expect, the number of blunders (game losing moves) drastically decreases with rating. It is unclear if the actual CPL per blunder decreases or increases with rating.

What is interesting is how mistakes stay relativity even, this may be due to the examined games being from the [blitz variant](https://en.wikipedia.org/wiki/Fast_chess#:~:text=and%20regular%20ratings.-,Blitz,minutes%20or%20less%20per%20player.&text=The%20USCF%20defines%20blitz%20chess,and%2010%20minutes%20per%20player.) of chess. Since the players have a limited time to think they are likely making moves that are good in the short term (`3-5` moves ahead), but may be suboptimal in `10+` moves. Realistically, it will be difficult for humans to ever eliminate all mistakes and inaccuracies from their play, but concentrating on reducing one's blunders even by `25%` yields incredible gains in ones rating.

# Conclusion

In both graphs, it is evident that the correlation factor between errors/ACPL and rating is low. Both are metrics that can be used to estimate the players' rating in a range, but are unideal to accurately judge a player's performance. Nonetheless, it is difficult to dispute the notion that better players have better ACPL.

# Notes

<b id="f1">[1]</b> A sample of `~2500` games was taken using [Lichess's API](https://lichess.org/api), resulting in `~5000` ACPL samples being used. Players were pooled in buckets based on their ELO (i.e. the ACPL was averaged for players across `700-719`, `720-739` etc). [↩](#a1)

<b id="f15">[1.5]</b> There is a peculiar uptick in ACPL at the very upper ranks likely due to low sampling of `2900+` rated games. [↩](#a15)

<b id="f2">[2]</b> One can imagine a scenario where the player immediately blunders their queen, causing their initial ACPL to be very high. As the game progresses, since the game is in such a dire position, all the player's available moves will be roughly of the same quality, meaning any move the player makes will have a CPL close to 0. Eventually, as the number of moves grows larger the initial spike in CPL will be averaged off. [↩](#a2)
